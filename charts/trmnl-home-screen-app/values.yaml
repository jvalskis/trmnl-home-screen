defaultPodOptions:
  automountServiceAccountToken: false
  securityContext:
    runAsUser: 1001
    runAsNonRoot: true

controllers:
  main:
    strategy: Recreate
    containers:
      main:
        image:
          repository: ghcr.io/jvalskis/trmnl-home-screen/trmnl-home-screen
          tag: ""
          pullPolicy: IfNotPresent
        env:
          TZ: UTC
          WEATHER_ENABLED: "false"
          WEATHER_CITY: "London"
          WEATHER_FETCH_INTERVAL_MINUTES: "60"
          ACCUWEATHER_API_KEY: YOUR_API_KEY
          CALENDAR_ENABLED: "false"
          CALDAV_CALENDAR_URL: "https://nextcloud.example.com/remote.php/dav/calendars/user/personal/"
          CALDAV_AUTH_TYPE: "basic"
          CALDAV_USERNAME: "user"
          CALDAV_PASSWORD: "app-password"
          CALDAV_FETCH_INTERVAL_MINUTES: "30"
          CALDAV_DAYS_AHEAD: "7"
          HOME_ASSISTANT_ENABLED: "false"
          HOME_ASSISTANT_WEBSOCKET_URL: "wss://home-assistant.local/api/websocket"
          HOME_ASSISTANT_PORT: "8123"
          HOME_ASSISTANT_USE_SSL: "false"
          HOME_ASSISTANT_ACCESS_TOKEN: YOUR_HA_TOKEN
          # Comma separated list of entities
          HOME_ASSISTANT_SUBSCRIBED_ENTITY_IDS: ""
          HOME_ASSISTANT_FETCH_INTERVAL_MINUTES: "15"
          HOME_ASSISTANT_TEMPLATE_FILE: "/app/templates/homeassistant.liquid"
        securityContext:
          readOnlyRootFilesystem: true
          allowPrivilegeEscalation: false
          capabilities:
            drop:
              - ALL
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi

service:
  main:
    controller: main
    type: ClusterIP
    ports:
      http:
        port: 8080

persistence:
  tmp:
    type: emptyDir
    globalMounts:
      - path: /tmp
